<script>
    document.querySelector('select').value = {{results.paymentMethod}}
</script>

<section class="crypto-search">
    <h1>Search</h1>

    <form class="search-form" action="/crypto/search" method="GET">
        <input type="text" class="search-coin" name="search" placeholder="Search here..."  value="{{results.keyword}}" >
        <select id="payment" name="paymentMethod">
            {{#select results.paymentMethod}}

            <option value="crypto-wallet">Crypto Wallet</option>
            <option value="credit-card">Credit Card</option>
            <option value="debit-card">Debit Card</option>
            <option value="paypal">PayPal</option>
            {{/select}}

        </select>
        <button type="submit" class="btn-search">Search</button>
    </form>

    {{#if results}}
    <div class="search-result">
        <div class="search-list">

        {{#each results}}
                {{> searchResultCard}}
        {{/each}}
        </div>
    </div>
    
    {{else}}
    <div class="no-match">
        <p>No match was found!</p>
    </div>
    {{/if}}

</section>


<script>
Handlebars.registerHelper("select", function(value, options) {
        return options.fn(this)
          .split('\n')
          .map(function(v) {
            var t = 'value="' + value + '"'
            return ! RegExp(t).test(v) ? v : v.replace(t, t + ' selected="selected"')
          })
          .join('\n')
      });
</script>

